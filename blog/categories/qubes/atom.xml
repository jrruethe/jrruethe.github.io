<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Qubes | Morning Musings]]></title>
  <link href="http://jrruethe.github.io/blog/categories/qubes/atom.xml" rel="self"/>
  <link href="http://jrruethe.github.io/"/>
  <updated>2016-05-15T20:19:05-04:00</updated>
  <id>http://jrruethe.github.io/</id>
  <author>
    <name><![CDATA[Joe Ruether]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Running Docker in Qubes]]></title>
    <link href="http://jrruethe.github.io/blog/2016/04/15/running-docker-in-qubes/"/>
    <updated>2016-04-15T18:09:15-04:00</updated>
    <id>http://jrruethe.github.io/blog/2016/04/15/running-docker-in-qubes</id>
    <content type="html"><![CDATA[<p>This is a quick post describing how to run Docker inside of a Qubes Appvm.</p>

<p><!--more--><div class='more'></div></p>

<h1>Create a new template</h1>

<p>I chose to clone my existing Debian template. This tutorial assumes the template is Debian-based. Ideally your template would be very minimal, only requiring basic packages such as the following:</p>

<ul>
<li>git</li>
<li>gedit</li>
</ul>


<p>If you are also planning on using the dockerfile generator, you will need the following:</p>

<ul>
<li>ruby</li>
<li>ruby-dev</li>
<li>gcc</li>
<li>make</li>
<li>fpm (<code>sudo gem install fpm</code>)</li>
</ul>


<p>Here is my template:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./01.png'><img class='caption' src='./01.png' width='100%' title='Template' alt=''></a><span class='caption-text'>Template</span></span></div></div></p>

<p>Make sure that the update proxy is disabled in the firewall settings:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./02.png'><img class='caption' src='./02.png' width='100%' title='Firewall' alt=''></a><span class='caption-text'>Firewall</span></span></div></div></p>

<h1>Install Docker to the template<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></h1>

<p>Run the following commands in the terminal:</p>

<pre><code>sudo apt-get update
sudo apt-get install curl
curl -fsSL https://get.docker.com/ | sh
</code></pre>

<p>Next, enable the default user to use Docker:</p>

<pre><code>sudo usermod -aG docker user
</code></pre>

<h1>Change the default directory<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></h1>

<pre><code>sudo vim /etc/systemd/system/docker.service
</code></pre>

<p>Add the following to the file:</p>

<pre><code>[Service]
ExecStart=
ExecStart=/usr/bin/docker daemon -H fd:// -g /home/user/docker
</code></pre>

<p>Finally, run the following command to apply the configuration:</p>

<pre><code>sudo systemctl daemon-reload
</code></pre>

<h1>Create an Appvm</h1>

<p>First, poweroff the template. Then create an Appvm based on the template. Increase the available disk space, since the docker images are being stored in the persistent private storage.</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./03.png'><img class='caption' src='./03.png' width='100%' title='Appvm' alt=''></a><span class='caption-text'>Appvm</span></span></div></div></p>

<h1>Test it out</h1>

<p>Run the following command in the Appvm as the normal user:</p>

<pre><code>docker run -it --rm hello-world
</code></pre>

<p>You should see the following:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./04.png'><img class='caption' src='./04.png' width='100%' title='Testing Docker' alt=''></a><span class='caption-text'>Testing Docker</span></span></div></div></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="https://docs.docker.com/linux/step_one/">https://docs.docker.com/linux/step_one/</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p><a href="https://docs.docker.com/engine/admin/systemd/">https://docs.docker.com/engine/admin/systemd/</a><a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Screenshots in Qubes]]></title>
    <link href="http://jrruethe.github.io/blog/2015/09/17/screenshots-in-qubes/"/>
    <updated>2015-09-17T18:51:55-04:00</updated>
    <id>http://jrruethe.github.io/blog/2015/09/17/screenshots-in-qubes</id>
    <content type="html"><![CDATA[<p>One of the security concepts of Qubes is that all work is done in separate VMs. The &ldquo;admin console&rdquo; for the Xen hypervisor is known as <code>dom0</code> and is responsible for managing the desktop environment. <code>dom0</code> is never supposed to interact with the other VMs, usb devices, or the network.</p>

<p>However, when taking a screenshot, they are inevitably stored inside <code>dom0</code>. What can be done about this?</p>

<p><!--more--><div class='more'></div></p>

<p>Laurent Ghugonis<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> shared a very handy script for taking a screenshot and sending it to a VM<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>. You can find that script below. I have a few minor edits, but Laurent gets all the credit:</p>

<p><!--escape--><div class='escape-wrapper'><notextile><!--content--><figure class='code'><div class='highlight'><table><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/sh&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Take screenshot<span class="o">(</span>s<span class="o">)</span> in Qubes Dom0 and copy to AppVM&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Dependencies: scrot <span class="o">(</span>sudo qubes-dom0-update scrot<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;My KDE shortcuts:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Meta-C       : qvm-screenshot.sh -s -n&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Meta-Shift-C : qvm-screenshot.sh -s -n -m&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Meta-Alt-C   : qvm-screenshot.sh -s -q&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2013, Laurent Ghigonis &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;&amp;#x6d;&amp;#97;&amp;#x69;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#108;&amp;#97;&amp;#x75;&amp;#114;&amp;#x65;&amp;#110;&amp;#116;&amp;#x40;&amp;#x70;&amp;#x31;&amp;#x73;&amp;#x65;&amp;#x63;&amp;#x2e;&amp;#99;&amp;#111;&amp;#x6d;&quot;</span>&gt;&amp;#x6c;&amp;#x61;&amp;#x75;&amp;#114;&amp;#101;&amp;#x6e;&amp;#x74;&amp;#64;&amp;#x70;&amp;#49;&amp;#115;&amp;#x65;&amp;#99;&amp;#x2e;&amp;#x63;&amp;#111;&amp;#109;&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Modified 2015, Joe Ruether &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;&amp;#109;&amp;#x61;&amp;#105;&amp;#108;&amp;#x74;&amp;#111;&amp;#x3a;&amp;#106;&amp;#x72;&amp;#x72;&amp;#117;&amp;#x65;&amp;#x74;&amp;#x68;&amp;#x65;&amp;#x40;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#105;&amp;#108;&amp;#x2e;&amp;#x63;&amp;#111;&amp;#109;&quot;</span>&gt;&amp;#106;&amp;#114;&amp;#x72;&amp;#x75;&amp;#101;&amp;#x74;&amp;#x68;&amp;#101;&amp;#x40;&amp;#103;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#x2e;&amp;#99;&amp;#x6f;&amp;#109;&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;DOM0_SHOTS_DIR<span class="o">=</span><span class="nv">$HOME</span>/Pictures
</span><span class='line'><span class="nv">APPVM_SHOTS_DIR</span><span class="o">=</span>/home/user/Pictures
</span><span class='line'><span class="nv">QUBES_DOM0_APPVMS</span><span class="o">=</span>/var/lib/qubes/appvms/&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;usage<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>   <span class="nb">echo</span> &amp;ldquo;<span class="nv">$program</span> <span class="o">[</span>-hlmqs<span class="o">]</span>&amp;rdquo;
</span><span class='line'>   <span class="nb">echo</span> -e &amp;ldquo;<span class="se">\t</span>-m : take multiple shots&amp;rdquo;
</span><span class='line'>   <span class="nb">echo</span> -e &amp;ldquo;<span class="se">\t</span>-n : after screenshot, run nautilus in AppVM&amp;rdquo;
</span><span class='line'>   <span class="nb">echo</span> -e &amp;ldquo;<span class="se">\t</span>-q : only take screenshot, no blabla&amp;rdquo;
</span><span class='line'>   <span class="nb">echo</span> -e &amp;ldquo;<span class="se">\t</span>-s : <span class="k">select </span>window&amp;rdquo;
</span><span class='line'><span class="o">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;program<span class="o">=</span>&amp;ldquo;&lt;code&gt;basename <span class="nv">$0</span>&lt;/code&gt;&amp;rdquo;
</span><span class='line'><span class="nv">mode_multi</span><span class="o">=</span>0
</span><span class='line'><span class="nv">mode_nautilus</span><span class="o">=</span>0
</span><span class='line'><span class="nv">mode_select</span><span class="o">=</span>0
</span><span class='line'><span class="nv">opts</span><span class="o">=</span>&amp;ldquo;<span class="k">$(</span>getopt -o hmnqs -n &amp;rdquo;<span class="nv">$program</span><span class="s2">&quot; &amp;mdash; &amp;ldquo;$@&amp;rdquo;)&amp;ldquo;</span>
</span><span class='line'><span class="s2">err=$?</span>
</span><span class='line'><span class="s2">eval set &amp;mdash; &amp;rdquo;$opts&quot;</span>
</span><span class='line'><span class="k">while </span><span class="nb">true</span>; <span class="k">do case</span> <span class="nv">$1</span> in
</span><span class='line'>   -h<span class="k">)</span> usage; <span class="nb">exit </span>1 ;;
</span><span class='line'>   -q<span class="o">)</span> <span class="nv">mode_quick</span><span class="o">=</span>1; <span class="nb">shift</span> ;;
</span><span class='line'>   -m<span class="o">)</span> <span class="nv">mode_multi</span><span class="o">=</span>1; <span class="nb">shift</span> ;;
</span><span class='line'>   -n<span class="o">)</span> <span class="nv">mode_nautilus</span><span class="o">=</span>1; <span class="nb">shift</span> ;;
</span><span class='line'>   -s<span class="o">)</span> <span class="nv">mode_select</span><span class="o">=</span>1; <span class="nb">shift</span> ;;
</span><span class='line'>   &amp;mdash;<span class="o">)</span> <span class="nb">shift</span>; <span class="nb">break</span> ;;
</span><span class='line'><span class="k">esac done</span>
</span><span class='line'><span class="o">[[</span> <span class="nv">$err</span> -ne 0 <span class="o">]]</span> &amp;amp;&amp;amp; usage &amp;amp;&amp;amp; <span class="nb">exit </span>1&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;shotslist<span class="o">=</span>&amp;ldquo;&amp;rdquo;
</span><span class='line'>mkdir -p <span class="nv">$DOM0_SHOTS_DIR</span> <span class="o">||</span><span class="nb">exit </span>1
</span><span class='line'><span class="k">while </span><span class="nb">true</span>; <span class="k">do</span>
</span><span class='line'><span class="k">   </span><span class="nv">d</span><span class="o">=</span>&lt;code&gt;date +<span class="s2">&quot;%Y%m%d%H%M%S&quot;</span>&lt;/code&gt;
</span><span class='line'>   <span class="nv">shotname</span><span class="o">=</span><span class="nv">$d</span>.png
</span><span class='line'>   <span class="k">if</span> <span class="o">[</span> <span class="nv">$mode_select</span> -eq 1 <span class="o">]</span>; <span class="k">then</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;  <span class="nb">echo</span> <span class="s2">&quot;[-] making shot, click on a window&quot;</span>
</span><span class='line'>  scrot <span class="nv">$@</span> -s -b <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$shotname</span> <span class="o">||</span><span class="nb">break</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="k">else</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;  <span class="nb">echo</span> <span class="s2">&quot;[-] making shot of root window&quot;</span>
</span><span class='line'>  scrot <span class="nv">$@</span> <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$shotname</span> <span class="o">||</span><span class="nb">break</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="k">fi</span>
</span><span class='line'>   <span class="o">[[</span> <span class="nv">$mode_quick</span> -eq 1 <span class="o">]]</span> &amp;amp;&amp;amp; <span class="nb">exit </span>1&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="nb">echo</span> &amp;ldquo;<span class="o">[</span>&amp;ndash;<span class="o">]</span> saving <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$shotname</span>&amp;rdquo;
</span><span class='line'>   mv <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$tmpname</span> <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$shotname</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="nv">shotslist</span><span class="o">=</span>&amp;ldquo;<span class="k">${</span><span class="nv">shotslist</span><span class="k">}${</span><span class="nv">shotname</span><span class="k">}</span>:&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="o">[[</span> <span class="nv">$mode_multi</span> -eq 1 <span class="o">]]</span> &amp;amp;&amp;amp; kdialog &amp;mdash;yesno &amp;ldquo;Other shot ?&amp;rdquo; <span class="o">||</span> <span class="nb">break</span>
</span><span class='line'><span class="k">done</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;choice<span class="o">=</span>&lt;code&gt;ls <span class="nv">$QUBES_DOM0_APPVMS</span> |sed <span class="s1">&#39;s/\([^ ]*\)/\1 \1/g&#39;</span>&lt;/code&gt;
</span><span class='line'><span class="nv">appvm</span><span class="o">=</span>&lt;code&gt;kdialog --menu <span class="s2">&quot;Select destination AppVM&quot;</span> <span class="nv">$choice</span> --title <span class="s2">&quot;$program&quot;</span>&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;if <span class="o">[</span> X<span class="s2">&quot;$appvm&quot;</span> !<span class="o">=</span> X<span class="s2">&quot;&amp;ldquo; ]; then</span>
</span><span class='line'><span class="s2">   if [ $mode_nautilus -eq 1 ]; then&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">&lt;pre&gt;&lt;code&gt;  echo &quot;</span><span class="o">[</span>-<span class="o">]</span> running nautilus in AppVM<span class="s2">&quot;</span>
</span><span class='line'><span class="s2">  qvm-run $appvm &quot;</span>nautilus <span class="nv">$APPVM_SHOTS_DIR</span><span class="s2">&quot;</span>
</span><span class='line'><span class="s2">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">&lt;p&gt;   fi&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">&lt;p&gt;   echo &amp;ldquo;[&amp;ndash;] copy to AppVM $appvm&amp;rdquo;</span>
</span><span class='line'><span class="s2">   qvm-run $appvm &amp;ldquo;mkdir -p $APPVM_SHOTS_DIR&amp;rdquo;</span>
</span><span class='line'><span class="s2">   IFS=&amp;ldquo;:&amp;rdquo;; for shot in $shotslist; do&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">&lt;pre&gt;&lt;code&gt;  echo &quot;</span><span class="o">[</span>-<span class="o">]</span> copying <span class="nv">$APPVM_SHOTS_DIR</span>/<span class="nv">$shot</span><span class="s2">&quot;</span>
</span><span class='line'><span class="s2">  cat $DOM0_SHOTS_DIR/$shot \</span>
</span><span class='line'><span class="s2">     |qvm-run --pass-io $appvm &quot;</span>cat &amp;gt; <span class="nv">$APPVM_SHOTS_DIR</span>/<span class="nv">$shot</span><span class="err">&quot;</span>
</span><span class='line'>  rm -f <span class="nv">$DOM0_SHOTS_DIR</span>/<span class="nv">$shot</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   <span class="k">done</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">   </span><span class="nb">echo</span> &amp;ldquo;no AppVM name provided&amp;rdquo;
</span><span class='line'><span class="k">fi</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;echo &amp;ldquo;<span class="o">[</span>*<span class="o">]</span> <span class="k">done</span>&amp;rdquo;
</span></code></pre></td></tr></table></div></figure><!--end-content--></notextile></div><!--end-escape--></p>

<p>Save this script in the home directory of <code>dom0</code> as <code>qvm-screenshot.sh</code>. You can run the following commands in a <code>dom0</code> terminal, assuming the script was downloaded inside a VM named <code>Work</code>:</p>

<pre><code>qvm-run --pass-io Work 'cat ~/Downloads/qvm-screenshot.sh' &gt; ~/qvm-screenshot.sh
chmod 755 ~/qvm-screenshot.sh
</code></pre>

<p>Next, open up Start &ndash;> System Tools &ndash;> System Settings, and select &ldquo;Shortcuts and Gestures&rdquo;</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./01.png'><img class='caption' src='./01.png' width='100%' title='System Settings' alt=''></a><span class='caption-text'>System Settings</span></span></div></div></p>

<p>I use &ldquo;Print Screen&rdquo; and &ldquo;Print Window&rdquo;, tied to the <code>PrtSc</code> and <code>Meta+PrtSc</code> keys respectively. Print Screen simply takes a screenshot of the entire desktop, while Print Window only captures the window that is clicked on after the keypress. You can see my setup at the bottom of this post.</p>

<p>Activating the keypress will yield the following window:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./02.png'><img class='caption' src='./02.png' width='100%' title='Screenshot' alt=''></a><span class='caption-text'>Screenshot</span></span></div></div></p>

<p>Simply select the VM you want the screenshot saved to, and it will appear in that VM&rsquo;s Pictures folder.</p>

<p>Also, if you are interested, Laurent also shared a script for recording video of the desktop<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>.</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./03.png'><img class='caption' src='./03.png' width='100%' title='Trigger' alt=''></a><span class='caption-text'>Trigger</span></span></div></div>
<div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./04.png'><img class='caption' src='./04.png' width='100%' title='Action' alt=''></a><span class='caption-text'>Action</span></span></div></div></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="https://groups.google.com/forum/#!msg/qubes-devel/CwSPqtPYTRQ/7Dp7Tw28adUJ">https://groups.google.com/forum/#!msg/qubes-devel/CwSPqtPYTRQ/7Dp7Tw28adUJ</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p><a href="http://git.zx2c4.com/laurent-tools/tree/tools/qvm-screenshot.sh">http://git.zx2c4.com/laurent-tools/tree/tools/qvm-screenshot.sh</a><a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p><a href="http://git.zx2c4.com/laurent-tools/tree/tools/qvm-screenrecord.sh">http://git.zx2c4.com/laurent-tools/tree/tools/qvm-screenrecord.sh</a><a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting Up Qubes]]></title>
    <link href="http://jrruethe.github.io/blog/2015/09/12/setting-up-qubes/"/>
    <updated>2015-09-12T11:35:50-04:00</updated>
    <id>http://jrruethe.github.io/blog/2015/09/12/setting-up-qubes</id>
    <content type="html"><![CDATA[<p>I have recently switched to Qubes OS and I really like it. It has some very handy tools that make working with a secure system seamless.
I decided I wanted to write about my setup and how to fix the minor problems I encountered.
As a test, this entire post was written using Qubes, as a way for me to prove to myself that I could still be productive and have an easy-to-use system while remaining secure.</p>

<p><!--more--><div class='more'></div></p>

<h1>Understanding Qubes</h1>

<p>Qubes is not a distribution of Linux. Rather, it is a set of tools built on top of the Xen hypervisor, allowing you to interoperate between multiple isolated virtual machines. Each virtual machine is &ldquo;paravirtualized&rdquo;, meaning they all share a common Linux kernel but have separated filesystems, devices, etc. Furthermore, the filesystems are layered such that multiple separate VMs can share a common underlying template to save storage space. In my mind, this is similar in concept to how Docker works. Unlike Docker, which utilizes Linux kernel namespaces, Qubes utilizes hardware enforced isolation via virtualization capabilities in the CPU, so it is much more secure.</p>

<p>The main interface is called <code>dom0</code>, and acts as an administration panel for Xen, allowing the user to easily manage and manipulate the various virtual machines. Each virtual machine is given a color so the user can visually assess which security domain they are working in at all times. The Qubes tools allow for secure file/clipboard copying between VMs, controlled networking, and seamless application interaction; You will barely even notice that you are working with a series of virtual machines under the hood.</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./01.png'><img class='caption' src='./01.png' width='100%' title='Qubes Example Desktop' alt=''></a><span class='caption-text'>Qubes Example Desktop</span></span></div></div></p>

<p>It is important to understand that Qubes grants the ability to easily create a secure computing environment, but it relies heavily on the user to utilize best practices; it will not prevent foolish mistakes. The user must be mindful about keeping data and connections isolated; Qubes helps you do it effectively.</p>

<p>Read more about Qubes <a href="https://www.qubes-os.org/doc/SimpleIntro/">here</a>.</p>

<h1>Considerations before migrating to Qubes</h1>

<p>Qubes 3.0 works very well and is very usable. Its VM management and interaction tool are well done, easy to use, and non-intrusive. However, using Qubes comes with a significant drawback:</p>

<ul>
<li>No non-mass-storage USB devices in VMs</li>
</ul>


<p>Do not misunderstand; Mass storage devices such as flash drives and external hard drives (block devices) work flawlessly and can be assigned to any VM very easily. However, devices such as USB network cards or Yubikey smartcards do not work in the VMs.</p>

<p>The USB devices do work in <code>dom0</code>, meaning that USB keyboards and mice are fine. It would be dangerous to connect a USB network card to <code>dom0</code>, because <code>dom0</code> should be airgapped.</p>

<blockquote><p><strong>Airgapped</strong><br/>
Airgapping means the machine is never connected to the internet. It is completely isolated, as in &ldquo;separated by a gap of air&rdquo;. Most of the time, airgapping refers to two physically separated machines, however in the case of Qubes it refers a virtual machine separated from the network. Ideally, files are only ever copied <em>into</em> the airgapped machine, never out of it.</p></blockquote>

<p>There are various hints on the forums that people have gotten this to work, but it seems to be hardware dependent. My laptop has two USB controllers; one dedicated to the touchscreen (which also works flawlessly, by the way), the other dedicated to the external ports. This means that if I assign my USB controller to a VM, <em>only</em> that VM has access to those devices. This interferes with my USB wireless mouse. In theory, this should be OK. In practice, I haven&rsquo;t been able to get my VMs to boot when they have the USB controller assigned to them, and I don&rsquo;t seem to be able to reassign the USB controller back to <code>dom0</code> easily.</p>

<p>However, these issues are fairly easy for me to work around. If I need 3G/4G modem, I use a mobile wireless hotspot and just connect to the Wifi. Similarily, my printer is network enabled, so I don&rsquo;t need to connect it via USB. As for Yubikeys, the &ldquo;keyboard&rdquo; capabilities work out of the box, and Qubes' Split-GPG functionality can substitute the smartcard functionality of the Yubikey.</p>

<p>Read more about these considerations <a href="https://www.qubes-os.org/doc/UserFaq/">here</a>.</p>

<h1>Getting Qubes</h1>

<p>Simply download <code>Qubes-R3.0-rc2-x86_64-DVD.iso</code> from <a href="https://www.qubes-os.org/doc/QubesDownloads/">here</a>. Be sure to also grab the signature file. Before attempting to burn / install Qubes, you should <a href="https://www.qubes-os.org/doc/VerifyingSignatures/">verify the signatures</a>.</p>

<h1>Installing Qubes</h1>

<p>The installer is pretty straightforward. I chose to do manual partitioning, with a <code>boot</code> drive of 2GB using <code>ext4</code> and a <code>root</code> drive taking the remaining space using <code>btrfs</code> and <code>luks</code> encryption. My plan in the future is to have a Tails iso available for booting from the <code>boot</code> drive. My disk has limited space, so I chose <code>btrfs</code> for its compression abilities. Finally, be sure to also install the <code>fedora-21</code> and <code>debian-8</code> templates.</p>

<h1>Creating Domains</h1>

<p>The first thing I do is clone the standard <code>fedora-21</code> and <code>debian-8</code> templates, such that I always have a fresh working fallback in case something goes wrong when modifying them. I typically use two separate <code>debian-8</code> templates; one for a minimal image that won&rsquo;t change often, and one for an &ldquo;experimental&rdquo; image that I install various software to.</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./02.png'><img class='caption' src='./02.png' width='100%' title='Qubes VM Manager' alt=''></a><span class='caption-text'>Qubes VM Manager</span></span></div></div></p>

<p>I like to have a few primary domains:</p>

<ul>
<li>Personal (Yellow): My configured browser, email, instant messaging, and blogging setup.</li>
<li>Work (Orange): Stuff I am working on, experiments, etc.</li>
<li>Vault (Green): Passwords, keys, sensitive files.</li>
</ul>


<p>Qubes is all about isolation. My sensitive files are isolated away to the Vault, which has no network access and never touches a USB drive. I use Qubes' secure file copying from another trusted VM to put things into the Vault.</p>

<p>Other secondary domains include the system proxies, Whonix, and a VM dedicated to Tor:</p>

<ul>
<li>sys-net (Red): Manages the network devices, has direct internet access</li>
<li>sys-firewall (Green): A trusted firewall that grants other VMs internet access</li>
<li>sys-tor (Green): A Tor proxy that grants other VMs Tor access</li>
<li>sys-gpg (Green): A special domain for GPG subkey storage</li>
<li>sys-whonix (Violet): The Whonix gateway</li>
<li>Tor (Orange): Special domain containing only a web browser configured to use Tor</li>
<li>Whonix (Violet): The Whonix workstation</li>
</ul>


<p>Here is a diagram of how the VM &ldquo;inheritance&rdquo; is set up:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./03.png'><img class='caption' src='./03.png' width='100%' title='VM Inheritance' alt=''></a><span class='caption-text'>VM Inheritance</span></span></div></div></p>

<p>As you can see, I have multiple domains that I use at a &ldquo;personal&rdquo; level, so they share the same template, which I try to keep minimal and stable. Separate from that is my &ldquo;testing&rdquo; template that I do my work in. This typically involves installing experimental software, or development tools / libraries that I don&rsquo;t want cluttering up my personal domain.</p>

<p>Here is a diagram of how the VM networking is set up:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./04.png'><img class='caption' src='./04.png' width='100%' title='VM Networking' alt=''></a><span class='caption-text'>VM Networking</span></span></div></div></p>

<p>There are a couple things to note here:</p>

<ul>
<li>All domains get network access from the firewall. This isolates the system from the internet as much as possible.</li>
<li>Sensitive VMs such as <code>sys-gpg</code> and the <code>Vault</code> do not (and will never have) network access. This keeps them airgapped.</li>
<li>The Whonix templates must access the internet through the Whonix gateway, otherwise they won&rsquo;t be able to update.</li>
</ul>


<h1>Fixes</h1>

<p>For the most part, Qubes works great out of the box, however there are a few things that need small fixes, especially after performing the first software update in <code>dom0</code> and the template VMs.</p>

<h2>Fixing Nautilus in Debian <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></h2>

<p>After updating, Nautilus won&rsquo;t open due to a dbus error.
To fix this, replace the contents of <code>/usr/bin/qubes-desktop-run</code> in your Debian templates with the following:</p>

<p><!--escape--><div class='escape-wrapper'><notextile><!--content--><figure class='code'><div class='highlight'><table><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">!</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gio</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">dbus</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">myname</span><span class="p">,</span> <span class="n">desktop</span><span class="p">,</span> <span class="o">*</span><span class="n">files</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">launcher</span> <span class="o">=</span> <span class="n">Gio</span><span class="o">.</span><span class="n">DesktopAppInfo</span><span class="o">.</span><span class="n">new_from_filename</span><span class="p">(</span><span class="n">desktop</span><span class="p">)</span>
</span><span class='line'><span class="n">activatable</span> <span class="o">=</span> <span class="n">launcher</span><span class="o">.</span><span class="n">get_boolean</span><span class="p">(</span><span class="s">&#39;DBusActivatable&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">if</span> <span class="n">activatable</span><span class="p">:</span>
</span><span class='line'>    <span class="n">bus</span> <span class="o">=</span> <span class="n">dbus</span><span class="o">.</span><span class="n">SessionBus</span><span class="p">()</span>
</span><span class='line'>    <span class="nb">id</span> <span class="o">=</span> <span class="n">launcher</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
</span><span class='line'>    <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">[:</span><span class="o">-</span><span class="mi">8</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bus</span><span class="o">.</span><span class="n">start_service_by_name</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</span><span class='line'><span class="n">launcher</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">if</span> <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">name</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">main</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&amp;</span><span class="n">rdquo</span><span class="p">;:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">main</span><span class="p">(</span><span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure><!--end-content--></notextile></div><!--end-escape--></p>

<p>Note that this has already been fixed in the upstream repo, and may not be needed in the future.</p>

<h2>Fixing Terminal in Debian <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></h2>

<p>After upgrading, the locale&rsquo;s might get messed up, causing <code>gnome-terminal</code> to not load.
Run the following commands as root in your Debian templates:</p>

<pre><code>localedef -f UTF-8 -i en_US -c en_US.UTF-8
update-locale LC_ALL=en_US.UTF-8
</code></pre>

<h2>Fixing Copy To VM <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></h2>

<p>The secure copy-to-vm scripts require the Python GTK bindings, but they are not installed by default.
Install <code>python-gtk2</code> in all your Debian templates:</p>

<pre><code>apt-get install python-gtk2
</code></pre>

<h2>Fixing Copy / Paste <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup></h2>

<p>In the terminal, <code>Ctrl-Shift-c</code> and <code>Ctrl-Shift-v</code> are mapped to copy and paste.
However, in Qubes, these are mapped to the global cross-vm copy-paste commands.
Lets change the Qubes shortcut keys to use the little &ldquo;Windows&rdquo; key next to the Alt key.</p>

<p>In <code>dom0</code>, edit <code>/etc/qubes/guid.conf</code> to uncomment and set the following lines:</p>

<pre><code>secure_copy_sequence = "Mod4-c";
secure_paste_sequence = "Mod4-v";
</code></pre>

<h1>Installing Tor <sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></h1>

<p>The instructions from the Qubes website are pretty straightforward, but I will replicate them here by using the GUI instead of the command line.</p>

<p>First create a copy of the standard <code>fedora-21</code> template:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./05.png'><img class='caption' src='./05.png' width='100%' title='Clone Template' alt=''></a><span class='caption-text'>Clone Template</span></span></div></div></p>

<p>Next, create a <code>sys-tor</code> proxy VM from that template:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./06.png'><img class='caption' src='./06.png' width='100%' title='ProxyVM' alt=''></a><span class='caption-text'>ProxyVM</span></span></div></div></p>

<p>In a <code>dom0</code> terminal, enter the following commands:</p>

<pre><code>qvm-service sys-tor -d qubes-netwatcher
qvm-service sys-tor -d qubes-firewall
qvm-service sys-tor -e qubes-tor
</code></pre>

<p>Fire up the <code>fedora-21-tor</code> template and install Tor:</p>

<pre><code>sudo yum install qubes-tor-repo
sudo yum install qubes-tor
</code></pre>

<p>Now all you need to do is make a normal VM and use <code>sys-tor</code> as your network:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./07.png'><img class='caption' src='./07.png' width='100%' title='Tor Network' alt=''></a><span class='caption-text'>Tor Network</span></span></div></div></p>

<p>Note that while this gives you access to Tor, it isn&rsquo;t necessarily optimized for privacy. For that you will want Whonix.</p>

<h1>Installing Whonix <sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup></h1>

<p>The Whonix developers have done a great job making Whonix templates that are super easy to install. Simply run the following in a <code>dom0</code> terminal:</p>

<pre><code>sudo qubes-dom0-update --enablerepo=qubes-templates-community qubes-template-whonix-gw qubes-template-whonix-ws
</code></pre>

<p>Once that command completes, you will have two new templates available: <code>whonix-gw</code> and <code>whonix-ws</code>, for the gateway and workstation respectively.</p>

<p>This is where things get slightly confusing. You need to create a VM that uses the gateway template, and use <em>that</em> as the network for the template itself in order to update it. Set up a VM like this:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./08.png'><img class='caption' src='./08.png' width='100%' title='Whonix Gateway' alt=''></a><span class='caption-text'>Whonix Gateway</span></span></div></div>
<div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./09.png'><img class='caption' src='./09.png' width='100%' title='Whonix Gateway Firewall' alt=''></a><span class='caption-text'>Whonix Gateway Firewall</span></span></div></div></p>

<p>Then, set up your <code>whonix-gw</code> template like this:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./10.png'><img class='caption' src='./10.png' width='100%' title='Whonix Gateway Template' alt=''></a><span class='caption-text'>Whonix Gateway Template</span></span></div></div>
<div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./11.png'><img class='caption' src='./11.png' width='100%' title='Whonix Gateway Template Firewall' alt=''></a><span class='caption-text'>Whonix Gateway Template Firewall</span></span></div></div></p>

<p>Finally, set up your <code>whonix-ws</code> template like this:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./12.png'><img class='caption' src='./12.png' width='100%' title='Whonix Workstation Template' alt=''></a><span class='caption-text'>Whonix Workstation Template</span></span></div></div>
<div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./13.png'><img class='caption' src='./13.png' width='100%' title='Whonix Workstation Template Firewall' alt=''></a><span class='caption-text'>Whonix Workstation Template Firewall</span></span></div></div></p>

<p>After that, you can shutdown those three VMs and create the workstation VM:</p>

<p><div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./14.png'><img class='caption' src='./14.png' width='100%' title='Whonix Workstation' alt=''></a><span class='caption-text'>Whonix Workstation</span></span></div></div>
<div class='img-outer-div'><div class='img-inner-div'><span class='caption-wrapper' style='width:100%;'><a class='fancybox' rel='group' href='./15.png'><img class='caption' src='./15.png' width='100%' title='Whonix Workstation Firewall' alt=''></a><span class='caption-text'>Whonix Workstation Firewall</span></span></div></div></p>

<p>Fire it up and it will automatically start the gateway. Both VMs will do their thing and synchronize to the network.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="https://groups.google.com/forum/#!searchin/qubes-users/nautilus/qubes-users/cUTu9xQGvI0/OiT8t8BcCgAJ">https://groups.google.com/forum/#!searchin/qubes-users/nautilus/qubes-users/cUTu9xQGvI0/OiT8t8BcCgAJ</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p><a href="https://groups.google.com/forum/#!topic/qubes-users/CuC-El1qoss">https://groups.google.com/forum/#!topic/qubes-users/CuC-El1qoss</a><a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p><a href="https://groups.google.com/forum/#!topic/qubes-users/say__leey3o">https://groups.google.com/forum/#!topic/qubes-users/say__leey3o</a><a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p><a href="https://github.com/QubesOS/qubes-gui-daemon/blob/master/gui-daemon/xside.c">https://github.com/QubesOS/qubes-gui-daemon/blob/master/gui-daemon/xside.c</a><a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p><a href="https://www.qubes-os.org/doc/UserDoc/TorVM/">https://www.qubes-os.org/doc/UserDoc/TorVM/</a><a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
<li id="fn:6">
<p><a href="https://www.whonix.org/wiki/Qubes/Binary_Install">https://www.whonix.org/wiki/Qubes/Binary_Install</a><a href="#fnref:6" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
</feed>
